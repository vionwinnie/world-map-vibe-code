(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{754:(t,e,n)=>{"use strict";n.d(e,{default:()=>s});var o=n(5155),i=n(2115);let l=t=>{let e=(null==t?void 0:t.length)||0;return e?1===e?"#7ec4cf":"#f49e4c":"#e0e0e0"};function r(t,e){var n;return(null==(n=e[t.id])?void 0:n.countryName)||t.properties.name||t.id}function s(){var t,e;let[s,a]=(0,i.useState)([]),[d,c]=(0,i.useState)({}),[u,h]=(0,i.useState)(null),[f,g]=(0,i.useState)(null),[p,m]=(0,i.useState)(null),[x,v]=(0,i.useState)(null),[j,y]=(0,i.useState)(""),b=(0,i.useRef)(null),S=(0,i.useRef)(null),w="/world-map-vibe-code";console.log("Base path in browser:",w),(0,i.useEffect)(()=>{fetch("".concat(w,"/data/travel-data.json")).then(t=>t.json()).then(t=>c(t)),fetch("https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json").then(t=>t.json()).then(t=>{n.e(220).then(n.bind(n,220)).then(e=>{a(e.feature(t,t.objects.countries).features)})})},[]),(0,i.useEffect)(()=>{if(!x)return void y("");fetch("".concat(w,"/comments/").concat(x.iso,".txt")).then(t=>{if(!t.ok)throw Error("No comment");return t.text()}).then(t=>y(t)).catch(()=>y(""))},[x]);let k=Object.keys(d).length;return(0,o.jsxs)("div",{ref:S,style:{width:"100%",maxWidth:900,margin:"0 auto",position:"relative"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:32},children:[(0,o.jsx)("h1",{style:{margin:0,fontSize:28,fontWeight:700,letterSpacing:-1},children:"Winnie's Travel Map"}),(0,o.jsxs)("div",{style:{fontSize:18,fontWeight:500,background:"#f49e4c",color:"#fff",borderRadius:24,padding:"8px 20px"},children:["Countries visited: ",(0,o.jsx)("span",{style:{fontWeight:700},children:k})]})]}),(0,o.jsx)("svg",{ref:b,viewBox:"0 0 800 400",style:{width:"100%",height:"auto",background:"#111",borderRadius:16},children:s.map((t,e)=>{let n=t.id,i=d[n];return("Polygon"===t.geometry.type?[t.geometry.coordinates]:t.geometry.coordinates).map((e,r)=>(0,o.jsx)("path",{d:e.map(t=>t.map((t,e)=>{let[n,o]=t;return(0===e?"M":"L")+(function(t){let[e,n]=t;return[(e+180)*800/360,(90-n)*400/180]})([n,o]).join(",")}).join(" ")+" Z").join(" "),fill:l(null==i?void 0:i.dates),stroke:"#fff",strokeWidth:.5,onMouseEnter:e=>{var o,i,l,r;h(n),g(t);let s=null==(o=b.current)?void 0:o.getBoundingClientRect(),a=null==(i=S.current)?void 0:i.getBoundingClientRect(),d=e.clientX-(null!=(l=null==s?void 0:s.left)?l:0),c=e.clientY-(null!=(r=null==s?void 0:s.top)?r:0);a&&(d=Math.max(120,Math.min(d,a.width-120)),c=Math.max(180,Math.min(c,a.height-10))),m({x:d,y:c})},onMouseMove:t=>{var e,n,o,i;let l=null==(e=b.current)?void 0:e.getBoundingClientRect(),r=null==(n=S.current)?void 0:n.getBoundingClientRect(),s=t.clientX-(null!=(o=null==l?void 0:l.left)?o:0),a=t.clientY-(null!=(i=null==l?void 0:l.top)?i:0);r&&(s=Math.max(120,Math.min(s,r.width-120)),a=Math.max(180,Math.min(a,r.height-10))),m({x:s,y:a})},onMouseLeave:()=>{h(null),g(null),m(null)},onDoubleClick:()=>{v({iso:n,geo:t})},style:{cursor:"pointer",transition:"fill 0.2s"}},n+"-"+r))})}),u&&p&&d[u]&&d[u].photos&&d[u].photos.length>0&&(0,o.jsxs)("div",{style:{position:"absolute",left:p.x,top:p.y,transform:"translate(-50%, -110%)",background:"#fff",borderRadius:12,boxShadow:"0 4px 16px rgba(0,0,0,0.15)",padding:0,zIndex:10,minWidth:180,maxWidth:240,pointerEvents:"none"},children:[(0,o.jsx)("div",{style:{display:"flex",gap:4,padding:8,justifyContent:"center",alignItems:"center"},children:d[u].photos.map((t,e)=>(0,o.jsx)("img",{src:"".concat(w).concat(t),alt:u+" photo",style:{width:60,height:60,objectFit:"cover",borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"}},e))}),(0,o.jsx)("div",{style:{padding:12},children:(0,o.jsx)("div",{style:{fontWeight:600,fontSize:16,marginBottom:4,color:"#222"},children:r(f,d)})})]}),x&&(0,o.jsxs)("div",{style:{position:"fixed",top:0,right:0,width:340,height:"100vh",background:"#fff",boxShadow:"-4px 0 24px rgba(0,0,0,0.18)",zIndex:100,padding:24,overflowY:"auto",display:"flex",flexDirection:"column"},children:[(0,o.jsx)("button",{onClick:()=>v(null),style:{alignSelf:"flex-end",marginBottom:16,background:"#eee",border:"none",borderRadius:8,padding:"6px 18px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),(0,o.jsxs)("h2",{style:{margin:0,marginBottom:8,color:"#222"},children:[r(x.geo,d)," (",x.iso,")"]}),(0,o.jsx)("div",{style:{marginBottom:12,color:"#888",fontSize:15},children:null==(t=d[x.iso])?void 0:t.dates.map((t,e)=>(0,o.jsxs)("div",{children:["Start: ",t.dateStart,", End: ",t.dateEnd]},e))}),(0,o.jsx)("div",{style:{marginBottom:16},children:null==(e=d[x.iso])?void 0:e.photos.map((t,e)=>(0,o.jsx)("img",{src:"".concat(w).concat(t),alt:x.iso+" photo",style:{width:"100%",borderRadius:10,marginBottom:8}},e))}),j&&(0,o.jsx)("div",{style:{fontStyle:"italic",color:"#666",fontSize:15},children:j})]})]})}},909:(t,e,n)=>{Promise.resolve().then(n.bind(n,754))}},t=>{var e=e=>t(t.s=e);t.O(0,[441,684,358],()=>e(909)),_N_E=t.O()}]);