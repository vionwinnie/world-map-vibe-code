(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{754:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var o=n(5155),i=n(2115);let l=e=>{let t=(null==e?void 0:e.length)||0;return t?1===t?"#7ec4cf":"#f49e4c":"#e0e0e0"};function r(e,t){var n;return(null==(n=t[e.id])?void 0:n.countryName)||e.properties.name||e.id}function s(){var e,t;let[s,a]=(0,i.useState)([]),[d,c]=(0,i.useState)({}),[u,h]=(0,i.useState)(null),[f,g]=(0,i.useState)(null),[p,m]=(0,i.useState)(null),[x,v]=(0,i.useState)(null),[y,j]=(0,i.useState)(""),b=(0,i.useRef)(null),w=(0,i.useRef)(null),S="/world-map-vibe-code";function k(e){let[t,n]=e;return[(t+180)*800/360,(90-n)*400/180]}console.log("Base path in browser:",S),(0,i.useEffect)(()=>{fetch("".concat(S,"/data/travel-data.json")).then(e=>e.json()).then(e=>c(e)),fetch("https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json").then(e=>e.json()).then(e=>{n.e(220).then(n.bind(n,220)).then(t=>{a(t.feature(e,e.objects.countries).features)})})},[]),(0,i.useEffect)(()=>{if(!x)return void j("");fetch("".concat(S,"/comments/").concat(x.iso,".txt")).then(e=>{if(!e.ok)throw Error("No comment");return e.text()}).then(e=>j(e)).catch(()=>j(""))},[x]);let M=Object.keys(d).length;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:'\n        path[stroke="#fff"][stroke-width="0.5"] {\n          shape-rendering: geometricPrecision;\n        }\n      '}),(0,o.jsxs)("div",{ref:w,style:{width:"100%",maxWidth:900,margin:"0 auto",position:"relative"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:32},children:[(0,o.jsx)("h1",{style:{margin:0,fontSize:28,fontWeight:700,letterSpacing:-1},children:"Winnie's Travel Map"}),(0,o.jsxs)("div",{style:{fontSize:18,fontWeight:500,background:"#f49e4c",color:"#fff",borderRadius:24,padding:"8px 20px"},children:["Countries visited: ",(0,o.jsx)("span",{style:{fontWeight:700},children:M})]})]}),(0,o.jsx)("svg",{ref:b,viewBox:"0 0 800 400",style:{width:"100%",height:"auto",background:"#111",borderRadius:16},children:s.map((e,t)=>{let n=e.id,i=d[n];return("Polygon"===e.geometry.type?[e.geometry.coordinates]:e.geometry.coordinates).map(e=>e.filter(e=>Array.isArray(e)&&e.length>2&&e.some(e=>{let[t,n]=e,[o,i]=k([t,n]);return o>=0&&o<=800&&i>=0&&i<=400}))).map((t,r)=>(0,o.jsx)("path",{d:t.map(e=>e.map((e,t)=>{let[n,o]=e;return(0===t?"M":"L")+k([n,o]).join(",")}).join(" ")+" Z").join(" "),fill:l(null==i?void 0:i.dates),stroke:"#fff",strokeWidth:.5,onMouseEnter:t=>{var o,i,l,r;h(n),g(e);let s=null==(o=b.current)?void 0:o.getBoundingClientRect(),a=null==(i=w.current)?void 0:i.getBoundingClientRect(),d=t.clientX-(null!=(l=null==s?void 0:s.left)?l:0),c=t.clientY-(null!=(r=null==s?void 0:s.top)?r:0);a&&(d=Math.max(120,Math.min(d,a.width-120)),c=Math.max(180,Math.min(c,a.height-10))),m({x:d,y:c})},onMouseMove:e=>{var t,n,o,i;let l=null==(t=b.current)?void 0:t.getBoundingClientRect(),r=null==(n=w.current)?void 0:n.getBoundingClientRect(),s=e.clientX-(null!=(o=null==l?void 0:l.left)?o:0),a=e.clientY-(null!=(i=null==l?void 0:l.top)?i:0);r&&(s=Math.max(120,Math.min(s,r.width-120)),a=Math.max(180,Math.min(a,r.height-10))),m({x:s,y:a})},onMouseLeave:()=>{h(null),g(null),m(null)},onDoubleClick:()=>{v({iso:n,geo:e})},style:{cursor:"pointer",transition:"fill 0.2s"}},n+"-"+r))})}),u&&p&&d[u]&&d[u].photos&&d[u].photos.length>0&&(0,o.jsxs)("div",{style:{position:"absolute",left:p.x,top:p.y,transform:"translate(-50%, -110%)",background:"#fff",borderRadius:12,boxShadow:"0 4px 16px rgba(0,0,0,0.15)",padding:0,zIndex:10,minWidth:180,maxWidth:240,pointerEvents:"none"},children:[(0,o.jsx)("div",{style:{display:"flex",gap:4,padding:8,justifyContent:"center",alignItems:"center"},children:d[u].photos.map((e,t)=>(0,o.jsx)("img",{src:"".concat(S).concat(e),alt:u+" photo",style:{width:60,height:60,objectFit:"cover",borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"}},t))}),(0,o.jsx)("div",{style:{padding:12},children:(0,o.jsx)("div",{style:{fontWeight:600,fontSize:16,marginBottom:4,color:"#222"},children:r(f,d)})})]}),x&&(0,o.jsxs)("div",{style:{position:"fixed",top:0,right:0,width:340,height:"100vh",background:"#fff",boxShadow:"-4px 0 24px rgba(0,0,0,0.18)",zIndex:100,padding:24,overflowY:"auto",display:"flex",flexDirection:"column"},children:[(0,o.jsx)("button",{onClick:()=>v(null),style:{alignSelf:"flex-end",marginBottom:16,background:"#eee",border:"none",borderRadius:8,padding:"6px 18px",fontWeight:600,cursor:"pointer"},children:"Cancel"}),(0,o.jsxs)("h2",{style:{margin:0,marginBottom:8,color:"#222"},children:[r(x.geo,d)," (",x.iso,")"]}),(0,o.jsx)("div",{style:{marginBottom:12,color:"#888",fontSize:15},children:null==(e=d[x.iso])?void 0:e.dates.map((e,t)=>(0,o.jsxs)("div",{children:["Start: ",e.dateStart,", End: ",e.dateEnd]},t))}),(0,o.jsx)("div",{style:{marginBottom:16},children:null==(t=d[x.iso])?void 0:t.photos.map((e,t)=>(0,o.jsx)("img",{src:"".concat(S).concat(e),alt:x.iso+" photo",style:{width:"100%",borderRadius:10,marginBottom:8}},t))}),y&&(0,o.jsx)("div",{style:{fontStyle:"italic",color:"#666",fontSize:15},children:y})]})]})]})}},909:(e,t,n)=>{Promise.resolve().then(n.bind(n,754))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(909)),_N_E=e.O()}]);